<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='flash.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <meta charset="UTF-8">
    <title>Ajouter une table</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 40px; 
            background-color: #f0f4f8; 
            color: #333; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h2 { color: #0b3d91; margin-bottom: 20px; }

        form { 
            background-color: white; 
            padding: 30px; 
            border-radius: 10px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        input, textarea, select { 
            padding: 10px; 
            margin: 10px; 
            width: 220px; 
            border: 1px solid #ccc; 
            border-radius: 5px; 
            font-size: 16px;
        }

        button { 
            padding: 10px 20px; 
            margin-top: 15px; 
            background-color: #0b3d91; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px;
        }

        button:hover { background-color: #06478c; }

        a { margin-top: 20px; color: #0b3d91; font-weight: bold; text-decoration: none; }
        a:hover { text-decoration: underline; }

        .flash-message {
            width: 300px;
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 5px;
        }
        .flash-message.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .flash-message.danger { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>

<h2>➕ Créer une nouvelle table</h2>

<!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash-message {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<form method="POST" action="{{ url_for('ajouter') }}">

    <!-- base existante -->
    <select name="nom_base_select">
        <option value="">Choisir une base existante</option>
        {% for base in bases %}
            <option value="{{ base }}">{{ base }}</option>
        {% endfor %}
    </select>

    <p>OU</p>

    <!-- nouvelle base -->
    <input type="text" name="nom_base_new"
            placeholder="Nouvelle base (ex: azerty)"
            pattern="[A-Za-z0-9_]+"
            title="Lettres, chiffres et underscore">

    <input type="text" name="nom_table" placeholder="Nom de la table" required>

    <input type="number" name="identifiant" placeholder="Identifiant" required>

    <input type="text" name="nom" placeholder="Nom" required>

    <input type="number" name="age" placeholder="Age" required>

    <input type="text" name="infos" placeholder="Infos" required>


    <button type="submit">Création</button>

</form>


<a href="{{ url_for('index') }}">⬅ Retour à l'accueil</a>

<script>
const nom = document.querySelector('input[name="nom"]');
nom.addEventListener('input', function() {
    this.value = this.value.replace(/[^A-Za-z]/g, '');
});

const nomTable = document.querySelector('input[name="nom_table"]');
nomTable.addEventListener('input', function() {
    this.value = this.value.replace(/[^A-Za-z0-9_]/g, '');
});
</script>

</body>
</html>